## ADDED Requirements

### Requirement: 预览区自动显示

系统 SHALL 在选中项内容超出列表显示宽度时，自动在列表下方显示预览区面板。

#### Scenario: 短内容时不显示预览区
- **WHEN** 用户选中的待办项内容较短（显示宽度 ≤ 列表可用宽度）
- **THEN** 预览区不显示，列表区占据全部可用空间

#### Scenario: 长内容时自动显示预览区
- **WHEN** 用户选中的待办项内容较长（显示宽度 > 列表可用宽度）
- **THEN** 预览区自动显示在列表下方，展示完整待办内容

#### Scenario: 切换选中项时预览区动态切换
- **WHEN** 用户从长内容项切换到短内容项
- **THEN** 预览区自动隐藏
- **WHEN** 用户从短内容项切换到长内容项
- **THEN** 预览区自动显示

### Requirement: 预览区内容展示

预览区 SHALL 完整展示选中项的待办内容，支持自动换行。

#### Scenario: 内容自动换行显示
- **WHEN** 待办内容长度超过预览区宽度
- **THEN** 内容自动换行显示，不截断

#### Scenario: 显示宽度正确计算多字节字符
- **WHEN** 待办内容包含中文等多字节字符
- **THEN** 显示宽度按实际占用列数计算（CJK 字符算 2 列，ASCII 算 1 列）

### Requirement: 预览区滚动

预览区 SHALL 支持 Alt+↑/↓ 快捷键滚动查看长文本。

#### Scenario: 向下滚动预览区
- **WHEN** 用户按下 Alt+↓ 且预览区内容超过显示高度
- **THEN** 预览区向下滚动一行

#### Scenario: 向上滚动预览区
- **WHEN** 用户按下 Alt+↑ 且 `preview_scroll > 0`
- **THEN** 预览区向上滚动一行

#### Scenario: 切换选中项时重置滚动位置
- **WHEN** 用户切换到新的待办项
- **THEN** 预览区滚动位置重置为 0（顶部）

### Requirement: 预览区标题信息

预览区标题 SHALL 显示当前选中项的索引和创建时间，长文本时显示滚动进度。

#### Scenario: 显示基本标题信息
- **WHEN** 预览区显示时
- **THEN** 标题格式为 `📖 第 N 项预览 [YYYY-MM-DD]`，显示选中项序号和创建日期

#### Scenario: 长文本显示滚动进度
- **WHEN** 预览区内容换行后超过预览区高度
- **THEN** 标题显示滚动进度 `📖 第 N 项预览 [X/Y行] Alt+↓/↑滚动`

#### Scenario: 短文本不显示滚动提示
- **WHEN** 预览区内容换行后未超过预览区高度
- **THEN** 标题仅显示基本标题信息

### Requirement: 布局动态调整

界面布局 SHALL 根据是否需要预览区动态调整区域分配。

#### Scenario: 无预览区时的布局
- **WHEN** 当前选中项不需要预览区
- **THEN** 布局为：列表区（动态高度）+ 状态栏（3 行）+ 帮助栏（2 行）

#### Scenario: 有预览区时的布局
- **WHEN** 当前选中项需要预览区
- **THEN** 布局为：列表区（55%）+ 预览区（最小 5 行）+ 状态栏（3 行）+ 帮助栏（2 行）
